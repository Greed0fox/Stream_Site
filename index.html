<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Particle Glow Ring</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #0a0a0a;
      overflow: hidden;
      height: 100%;
    }
    canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <canvas id="ring"></canvas>
  <script>
    const canvas = document.getElementById('ring');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    const centerX = w / 2;
    const centerY = h / 2;
    const RADIUS = 250;
    const PARTICLE_COUNT = 2000;

    const ringParticles = [];
    const ambientParticles = [];

    for (let i = 0; i < PARTICLE_COUNT; i++) {
      const angle = Math.random() * Math.PI * 2;
      const radialSpread = (Math.random() - 0.5) * 80;
      const radius = RADIUS + radialSpread;
      const yAngle = Math.sin(angle);
      const color = yAngle < 0 ? `hsl(270, 60%, ${40 + Math.random() * 15}%)` : `hsl(340, 70%, ${55 + Math.random() * 15}%)`;
      ringParticles.push({
        angle,
        baseRadius: radius,
        radius,
        size: 1 + Math.random() * 1.5,
        color,
        offset: Math.random() * 1000,
        speed: 0.001 + Math.random() * 0.002,
        blur: Math.random() * 2,
        drift: Math.random() * 0.5
      });
    }

    // Ambient free-floating particles
    for (let i = 0; i < 400; i++) {
      ambientParticles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        dx: (Math.random() - 0.5) * 0.6,
        dy: (Math.random() - 0.5) * 0.6,
        size: 1 + Math.random() * 2,
        color: `hsl(${Math.random() * 360}, 60%, 60%)`,
        opacity: 0.2 + Math.random() * 0.4
      });
    }

    function animate(time) {
      ctx.clearRect(0, 0, w, h);
      ctx.globalCompositeOperation = 'lighter';

      for (const p of ringParticles) {
        p.angle += 0.0005 + p.drift * 0.001;
        const radiusJitter = p.baseRadius + Math.sin(time * p.speed + p.offset) * 10;
        const radialOffset = Math.sin(time * p.speed + p.offset) * 20;
        const r = radiusJitter + radialOffset;

        const x = centerX + r * Math.cos(p.angle);
        const y = centerY + r * Math.sin(p.angle);

        const distToCenter = Math.hypot(x - centerX, y - centerY);
        const blurAmount = Math.max(0, (RADIUS - distToCenter) / 10);
        const alpha = 0.3 + Math.sin(time * p.speed + p.offset) * 0.3;

        ctx.beginPath();
        ctx.globalAlpha = Math.max(0, alpha);
        ctx.fillStyle = p.color;
        ctx.shadowBlur = 10 + blurAmount;
        ctx.shadowColor = p.color;
        ctx.arc(x, y, p.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.closePath();
      }

      for (const ap of ambientParticles) {
        ap.x += ap.dx;
        ap.y += ap.dy;

        if (ap.x < 0 || ap.x > w) ap.dx *= -1;
        if (ap.y < 0 || ap.y > h) ap.dy *= -1;

        ctx.beginPath();
        ctx.globalAlpha = ap.opacity;
        ctx.fillStyle = ap.color;
        ctx.shadowBlur = 8;
        ctx.shadowColor = ap.color;
        ctx.arc(ap.x, ap.y, ap.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.closePath();
      }

      ctx.globalAlpha = 1;
      ctx.globalCompositeOperation = 'source-over';
      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);

    window.addEventListener('resize', () => {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
